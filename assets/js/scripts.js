(function() {\n  // The form ID must match exactly as declared in index.html: 'github-user-${seed}'\n  const formId = 'github-user-${seed}';\n  const form = document.getElementById(formId);\n  const resultEl = document.getElementById('github-result');\n  const createdAtEl = document.getElementById('github-created-at');\n  const usernameEl = document.getElementById('github-username');\n  const ageEl = document.getElementById('github-account-age');\n  const errorAlert = document.getElementById('error-alert');\n  const usernameInput = document.getElementById('username-input');\n\n  // Token can be supplied via URL query parameter: ?token=YOUR_GITHUB_TOKEN\n  const urlParams = new URLSearchParams(window.location.search);\n  const tokenFromUrl = urlParams.get('token') || '';\n\n  function computeAgeFromDateString(dateStr) {\n    if (!dateStr) return 0;\n    const parts = dateStr.split('-');\n    const y = parseInt(parts[0], 10);\n    const m = parseInt(parts[1], 10) - 1;\n    const d = parseInt(parts[2], 10);\n    const created = new Date(y, m, d);\n    const now = new Date();\n    let age = now.getFullYear() - created.getFullYear();\n    const beforeAnniv = (now.getMonth() < created.getMonth()) || (now.getMonth() === created.getMonth() && now.getDate() < created.getDate());\n    if (beforeAnniv) age--;\n    return Math.max(age, 0);\n  }\n\n  async function fetchUser(username, token) {\n    const url = `https://api.github.com/users/${encodeURIComponent(username)}`;\n    const headers = token ? { 'Authorization': `token ${token}` } : {};\n    const resp = await fetch(url, { headers });\n    if (!resp.ok) {\n      const errText = await resp.text();\n      const message = errText?.trim() || `Request failed with status ${resp.status}`;\n      throw new Error(message);\n    }\n    const user = await resp.json();\n    const date = user.created_at ? user.created_at.substring(0, 10) : '';\n    const age = computeAgeFromDateString(date);\n    return { login: user.login, createdDate: date, age: age };\n  }\n\n  if (!form) {\n    console.warn('GitHub user form not found: id mismatch.');\n  }\n\n  form?.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const username = (usernameInput.value || '').trim();\n    if (!username) {\n      errorAlert.textContent = 'Please enter a GitHub username.';\n      errorAlert.classList.remove('d-none');\n      return;\n    }\n    errorAlert.classList.add('d-none');\n    errorAlert.textContent = '';\n    if (resultEl) resultEl.style.display = 'none';\n    if (ageEl) ageEl.textContent = '';\n\n    try {\n      const data = await fetchUser(username, tokenFromUrl);\n      createdAtEl.textContent = `Account Created At: ${data.createdDate} UTC`;\n      usernameEl.textContent = `Username: ${data.login ?? username}`;\n      if (ageEl) ageEl.textContent = `Account Age: ${data.age} year${data.age === 1 ? '' : 's'}`;\n      if (resultEl) resultEl.style.display = '';\n    } catch (err) {\n      errorAlert.textContent = `Error: ${err.message}`;\n      errorAlert.classList.remove('d-none');\n      if (resultEl) resultEl.style.display = 'none';\n    }\n  });\n})();